{
  "id": "nodepool-002",
  "name": "Scale node pools only (no create/delete)",
  "description": "Policy that grants the ability to scale node pools (update config) but not create or delete them. Useful for operators who need to adjust capacity.",
  "source": "https://docs.openshift.com/rosa/rosa_architecture/rosa-sts-about-iam-resources.html",
  "policy": {
    "version": "v0",
    "statements": [
      {
        "sid": "AllowDescribeOperations",
        "effect": "Allow",
        "actions": [
          "rosa:DescribeCluster",
          "rosa:DescribeNodePool",
          "rosa:ListClusters",
          "rosa:ListNodePools"
        ],
        "resources": [
          "*"
        ]
      },
      {
        "sid": "AllowScaleOperations",
        "effect": "Allow",
        "actions": [
          "rosa:UpdateNodePoolConfig"
        ],
        "resources": [
          "arn:aws:rosa:*:111122223333:nodepool/*/*/*"
        ]
      }
    ]
  },
  "testCases": [
    {
      "description": "User can update node pool config (scaling)",
      "request": {
        "action": "rosa:UpdateNodePoolConfig",
        "resource": "arn:aws:rosa:us-west-2:111122223333:nodepool/cluster1/workers/abc123"
      },
      "expectedResult": "ALLOW"
    },
    {
      "description": "User can describe node pools",
      "request": {
        "action": "rosa:DescribeNodePool",
        "resource": "arn:aws:rosa:us-west-2:111122223333:nodepool/cluster1/workers/abc123"
      },
      "expectedResult": "ALLOW"
    },
    {
      "description": "User cannot create new node pools",
      "request": {
        "action": "rosa:CreateNodePool",
        "resource": "arn:aws:rosa:us-west-2:111122223333:cluster/cluster1"
      },
      "expectedResult": "DENY"
    },
    {
      "description": "User cannot delete node pools",
      "request": {
        "action": "rosa:DeleteNodePool",
        "resource": "arn:aws:rosa:us-west-2:111122223333:nodepool/cluster1/workers/abc123"
      },
      "expectedResult": "DENY"
    },
    {
      "description": "User cannot update node pool version",
      "request": {
        "action": "rosa:UpdateNodePoolVersion",
        "resource": "arn:aws:rosa:us-west-2:111122223333:nodepool/cluster1/workers/abc123"
      },
      "expectedResult": "DENY"
    }
  ],
  "notes": "UpdateNodePoolConfig allows changing min/max/desired capacity and labels. UpdateNodePoolVersion is a separate action for OpenShift version updates."
}
